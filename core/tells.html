<html><head><title>uniform-scala: Telling</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Luke Tebbs" /><meta name="description" content="Purely functional user-interaction" /><meta name="og:image" content="/uniform-scala/img/poster.png" /><meta name="image" property="og:image" content="/uniform-scala/img/poster.png" /><meta name="og:title" content="uniform-scala: Telling" /><meta name="title" property="og:title" content="uniform-scala: Telling" /><meta name="og:site_name" content="uniform-scala" /><meta name="og:url" content="https://ltbs.github.io/uniform-scala/" /><meta name="og:type" content="website" /><meta name="og:description" content="Purely functional user-interaction" /><link rel="icon" type="image/png" href="/uniform-scala/img/favicon.png" /><meta name="twitter:title" content="uniform-scala: Telling" /><meta name="twitter:image" content="/uniform-scala/img/poster.png" /><meta name="twitter:description" content="Purely functional user-interaction" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/uniform-scala/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/uniform-scala/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/uniform-scala/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/uniform-scala/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/uniform-scala/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/uniform-scala/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/uniform-scala/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/uniform-scala/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/uniform-scala/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/uniform-scala/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/uniform-scala/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/uniform-scala/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/uniform-scala/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/uniform-scala/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/uniform-scala/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/uniform-scala/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/uniform-scala/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/uniform-scala/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/uniform-scala/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/uniform-scala/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/uniform-scala/highlight/styles/color-brewer.css" /><link rel="stylesheet" href="/uniform-scala/css/style.css" /><link rel="stylesheet" href="/uniform-scala/css/palette.css" /><link rel="stylesheet" href="/uniform-scala/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/uniform-scala/" class="brand"><div class="brand-wrapper"><span>uniform-scala</span></div></a></li> <li><a href="/uniform-scala/index.html" class="">Home</a></li> <li><a href="/uniform-scala/setup.html" class="">Setup</a></li> <li><a href="/uniform-scala/core/basic-program.html" class="">Writing a journey</a> <ul class="sub_section"> <li><a href="/uniform-scala/core/tells.html" class=" active ">Telling</a></li> <li><a href="/uniform-scala/core/asks.html" class="">Asking</a></li> <li><a href="/uniform-scala/core/interacts.html" class="">Interacting</a></li> <li><a href="/uniform-scala/core/validation.html" class="">Validation</a></li> <li><a href="/uniform-scala/core/branching.html" class="">Branching</a></li> <li><a href="/uniform-scala/core/remote-calls.html" class="">Remote Calls</a></li></ul></li> <li><a href="/uniform-scala/play/index.html" class="">Play Framework Interpreter</a> <ul class="sub_section"> <li><a href="/uniform-scala/play/controllers.html" class="">Controllers</a></li> <li><a href="/uniform-scala/play/web-monad.html" class="">WebMonad</a></li> <li><a href="/uniform-scala/play/internationalisation.html" class="">Internationalisation</a></li> <li><a href="/uniform-scala/play/listing-pages.html" class="">Listing Pages</a></li> <li><a href="/uniform-scala/play/remote-calls.html" class="">Memoisation</a></li></ul></li> <li><a href="/uniform-scala/interpreters.html" class="">Other Interpreters</a> <ul class="sub_section"> <li><a href="/uniform-scala/other/interpreter-cli.html" class="">CLI Interpreter</a></li> <li><a href="/uniform-scala/other/interpreter-logic-table.html" class="">Logic Table Interpreter</a></li> <li><a href="/uniform-scala/interpreter-static-site.html" class="">Static Site interpreter</a></li> <li><a href="/uniform-scala/interpreter-selenium.html" class="">Selenium Interpreter</a></li></ul></li> <li><a href="/uniform-scala/core/advanced.html" class="">Advanced Options</a> <ul class="sub_section"> <li><a href="/uniform-scala/core/writing-interpreters.html" class="">Writing Interpreters</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/ltbs/uniform-scala"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/ltbs/uniform-scala"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('uniform-scala Purely functional user-interaction');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('uniform-scala Purely functional user-interaction');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="ltbs" data-github-repo="uniform-scala"><div class="content-wrapper"><section><h1 id="tells">tells</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def tell[A](stepId: String, value: A): F[Unit]
</code></pre></div></div>

<p>A call to <code class="highlighter-rouge">tell</code> represents passing some typed data to the user. The
specifics of exactly how this should be done depends upon the
interpreter that is running the program and in particular how it
chooses to handle that datatype.</p>

<p>If we call <code class="highlighter-rouge">tell[A]("step-name", presentationData)</code> we will get an
<code class="highlighter-rouge">F[Unit]</code> emitted. <code class="highlighter-rouge">presentationData</code> must be of type <code class="highlighter-rouge">A</code> and <code class="highlighter-rouge">A</code> must
be in the types supported by the interpreter.</p>

<p><code class="highlighter-rouge">"step-name"</code> in this case is the step
identifier - these are presented to the user but the exact form will
depend upon the interpreter used. It may for example be used to
construct messages telling the user which question they are answering,
for forming URLâ€™s or for persistence of data.</p>

<p>Step identifiers should be unique not only to all the <code class="highlighter-rouge">tell</code>s in the
journey but across all the <code class="highlighter-rouge">ask</code>s and <code class="highlighter-rouge">interact</code>s too as otherwise the
interpreters can get confused as they do not know the current place in the
journey.</p>

<h2 id="type-aliases">Type aliases</h2>

<p>In our date-of-birth example we created a type alias called <code class="highlighter-rouge">TellTypes</code>
which defines the types we are allowed to tell our user.</p>

<p>Given this <code class="highlighter-rouge">TellTypes</code> definition -</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="kt">TellTypes</span> <span class="o">=</span> <span class="nc">Long</span> <span class="o">::</span> <span class="nc">NilTypes</span>
<span class="k">type</span> <span class="kt">AskTypes</span> <span class="o">=</span> <span class="nc">NilTypes</span>
</code></pre></div></div>

<p>This code will fail to compile -</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">badType</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span> <span class="kt">:</span> <span class="kt">cats.Monad</span><span class="o">](</span>
     <span class="o">|</span>   <span class="n">interpreter</span><span class="k">:</span> <span class="kt">Language</span><span class="o">[</span><span class="kt">F</span>, <span class="kt">TellTypes</span>, <span class="kt">AskTypes</span><span class="o">]</span>
     <span class="o">|</span> <span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
     <span class="o">|</span>   <span class="n">interpreter</span><span class="o">.</span><span class="n">tell</span><span class="o">(</span><span class="s">"oh-no"</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="nc">LocalDate</span><span class="o">.</span><span class="n">now</span><span class="o">)</span>
     <span class="o">|</span> <span class="o">}</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">24</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">Cannot</span> <span class="kt">find</span> <span class="kt">java.time.LocalDate</span> <span class="kt">in</span> <span class="kt">TellTypes</span>
<span class="nc">Error</span> <span class="n">occurred</span> <span class="n">in</span> <span class="n">an</span> <span class="n">application</span> <span class="n">involving</span> <span class="n">default</span> <span class="n">arguments</span><span class="o">.</span>
         <span class="n">interpreter</span><span class="o">.</span><span class="n">tell</span><span class="o">(</span><span class="s">"oh-no"</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="nc">LocalDate</span><span class="o">.</span><span class="n">now</span><span class="o">)</span>
                         <span class="o">^</span>
</code></pre></div></div>

<p>The reason here is that we are attempting to present a value of type
<code class="highlighter-rouge">java.time.LocalDate</code> to the user via a <code class="highlighter-rouge">tell</code>, but
<code class="highlighter-rouge">java.time.LocalDate</code> is not in <code class="highlighter-rouge">TellTypes</code>, only <code class="highlighter-rouge">Long</code> is.</p>

<p>In order to get this to work we could modify our program to send the
user a Long instead -</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">goodType</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span> <span class="kt">:</span> <span class="kt">cats.Monad</span><span class="o">](</span>
  <span class="n">interpreter</span><span class="k">:</span> <span class="kt">Language</span><span class="o">[</span><span class="kt">F</span>, <span class="kt">TellTypes</span>, <span class="kt">AskTypes</span><span class="o">]</span>
<span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
  <span class="n">interpreter</span><span class="o">.</span><span class="n">tell</span><span class="o">(</span><span class="s">"tell-a-long"</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="nc">LocalDate</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">toEpochDay</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Or we could add a requirement that the interpreter must know how to
present a <code class="highlighter-rouge">java.time.LocalDate</code> back to the user -</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="kt">TellTypes</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="nc">LocalDate</span> <span class="o">::</span> <span class="nc">Long</span> <span class="o">::</span> <span class="nc">NilTypes</span>
</code></pre></div></div>

<p>Because we do not ask the user for a <code class="highlighter-rouge">Long</code> in the above program we
can remove it from <code class="highlighter-rouge">TellTypes</code> (though it being there will not prevent
the program from compiling) -</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="kt">TellTypes</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="nc">LocalDate</span> <span class="o">::</span> <span class="nc">NilTypes</span>
</code></pre></div></div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/uniform-scala/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/uniform-scala/js/main.js"></script></body></html>